[supervisord]
nodaemon=true

; Supervisor inherits the container user (www-data)
; so no need for "user=" here.

[program:php-fpm]
command=php-fpm -F
priority=10
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
; Runs as www-data automatically

[program:queue]
directory=/app
command=php artisan queue:work --sleep=3 --tries=3
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
; "user=" removed — it inherits www-data

[program:cron]
directory=/app
command=/usr/local/bin/supercronic /etc/crontab
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
; "user=" removed — runs as www-data
